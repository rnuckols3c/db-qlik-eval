<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Databricks vs Qlik Evaluation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useMemo } = React;

        function EvaluationFramework() {
            const [showWeightGuide, setShowWeightGuide] = useState(false);
            const [showSubmitModal, setShowSubmitModal] = useState(false);
            const [submitterName, setSubmitterName] = useState('');
            const [submitterEmail, setSubmitterEmail] = useState('');
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [submitSuccess, setSubmitSuccess] = useState(false);
            const [submitError, setSubmitError] = useState('');

            const [metaWeights, setMetaWeights] = useState({
                coreBIAnalytics: 1.0,
                coreBIViz: 1.0,
                dataPlatform: 1.0,
                governance: 1.0,
                aiml: 1.0,
                devEx: 1.0,
                operations: 1.0,
                cost: 1.0,
                product: 1.0
            });

            const weightDefinitions = {
                1: { label: "Minimal", description: "Nice to have, little impact on decision" },
                2: { label: "Low", description: "Useful but not critical to success" },
                3: { label: "Moderate", description: "Important, noticeable impact on outcomes" },
                4: { label: "High", description: "Very important, significant decision factor" },
                5: { label: "Critical", description: "Essential feature, major decision driver" }
            };

            const [categories, setCategories] = useState([
                {
                    name: "Core BI: Analytics & Interactivity",
                    key: "coreBIAnalytics",
                    items: [
                        { name: "Data Modeling Flexibility", weight: 3, db: '', qlik: '', notes: "Qlik's associative engine vs SQL-based approach" },
                        { name: "Custom Calculations", weight: 3, db: '', qlik: '', notes: "SQL-based vs function library/set expressions in Qlik" },
                        { name: "Global Filtering & Interactivity", weight: 3, db: '', qlik: '', notes: "Cross-dashboard filtering" },
                        { name: "Self-Service Analytics Capabilities", weight: 3, db: '', qlik: '', notes: "Interactivity of Dashboards" },
                        { name: "Drill-through Navigation", weight: 3, db: '', qlik: '', notes: "Cross-dashboard linking capabilities" },
                        { name: "Accessibility", weight: 3, db: '', qlik: '', notes: "Keyboard navigation, screen readers, WCAG compliance" }
                    ]
                },
                {
                    name: "Core BI: Visualization & Design",
                    key: "coreBIViz",
                    items: [
                        { name: "Standard Visualizations", weight: 3, db: '', qlik: '', notes: "Basic charts availability" },
                        { name: "Layout Control & Design", weight: 3, db: '', qlik: '', notes: "Grid-based vs flexible canvas" },
                        { name: "Multi-level Visual Containers", weight: 3, db: '', qlik: '', notes: "Nested container hierarchies" },
                        { name: "Thematics/Styling", weight: 3, db: '', qlik: '', notes: "Standard themes and customization" },
                        { name: "Summary Tables/Scoreboards", weight: 3, db: '', qlik: '', notes: "Aggregated views and KPI displays" },
                        { name: "Mobile Responsiveness", weight: 3, db: '', qlik: '', notes: "Dashboard usability on mobile devices" }
                    ]
                },
                {
                    name: "Data Platform & Architecture",
                    key: "dataPlatform",
                    items: [
                        { name: "Batch/Daily Data Refresh", weight: 3, db: '', qlik: '', notes: "Simplified pipeline refresh, native orchestration" },
                        { name: "Data Governance", weight: 3, db: '', qlik: '', notes: "Centralized governance, fine-grained access control" },
                        { name: "Concurrency/Scalability", weight: 3, db: '', qlik: '', notes: "Performance with 25+ users" },
                        { name: "Query Performance at Scale", weight: 3, db: '', qlik: '', notes: "Dashboard speed with large datasets" },
                        { name: "Real-time Data Refresh", weight: 3, db: '', qlik: '', notes: "Streaming and near-real-time capabilities" },
                        { name: "Data Lineage & Observability", weight: 3, db: '', qlik: '', notes: "Built-in lineage tracking" }
                    ]
                },
                {
                    name: "Governance & Security",
                    key: "governance",
                    items: [
                        { name: "Row-Level Security & Access Control", weight: 3, db: '', qlik: '', notes: "Fine-grained data access, RLS capabilities" },
                        { name: "Auditability & Lineage", weight: 3, db: '', qlik: '', notes: "Audit logs, data lineage tracking" },
                        { name: "Data Residency & Encryption", weight: 3, db: '', qlik: '', notes: "Data location control, encryption at rest/in transit" },
                        { name: "Cross-tenant Isolation", weight: 3, db: '', qlik: '', notes: "Workspace isolation, data separation" },
                        { name: "Export/Print/Email Governance", weight: 3, db: '', qlik: '', notes: "Control over data distribution and sharing" }
                    ]
                },
                {
                    name: "AI/ML Capabilities & Future Readiness",
                    key: "aiml",
                    items: [
                        { name: "ML Model Integration", weight: 3, db: '', qlik: '', notes: "Python/ML frameworks, notebooks, MLflow integration" },
                        { name: "Feature Engineering Pipeline", weight: 3, db: '', qlik: '', notes: "Data preparation and transformation workflows" },
                        { name: "Advanced Analytics (Statistical/Predictive)", weight: 3, db: '', qlik: '', notes: "Built-in ML capabilities, AutoML" },
                        { name: "Conversational AI / NLQ", weight: 3, db: '', qlik: '', notes: "Natural-language interface that lets users query and explore data conversationally" },
                        { name: "Real-time ML Inference", weight: 3, db: '', qlik: '', notes: "Streaming + model serving capabilities" }
                    ]
                },
                {
                    name: "Developer Experience & Velocity",
                    key: "devEx",
                    items: [
                        { name: "CI/CD & Version Control", weight: 3, db: '', qlik: '', notes: "Git-native, code-based approach vs XML exports" },
                        { name: "Time to Production", weight: 3, db: '', qlik: '', notes: "Speed to deliver initial production deployment" },
                        { name: "Feature Velocity", weight: 3, db: '', qlik: '', notes: "Speed of iterating and adding features post-launch" },
                        { name: "Documentation & Support", weight: 3, db: '', qlik: '', notes: "Quality of docs, community, and vendor support" },
                        { name: "Code Reusability", weight: 3, db: '', qlik: '', notes: "Modular notebooks, shared libraries" }
                    ]
                },
                {
                    name: "Operations & Scalability",
                    key: "operations",
                    items: [
                        { name: "iFrame Embedding Capabilities", weight: 3, db: '', qlik: '', notes: "Ability to embed within external applications" },
                        { name: "Infrastructure/Alerts/DR", weight: 3, db: '', qlik: '', notes: "Enterprise-level features, cloud-native advantage" },
                        { name: "User Authentication & SSO", weight: 3, db: '', qlik: '', notes: "Support for single sign-on and centralized user authentication" },
                        { name: "Export Capabilities", weight: 3, db: '', qlik: '', notes: "Support for exporting data and visualizations to files or external tools" },
                        { name: "Multi-tenancy Support", weight: 3, db: '', qlik: '', notes: "Workspace isolation capabilities" },
                        { name: "Monitoring & Observability", weight: 3, db: '', qlik: '', notes: "Built-in monitoring, query profiling" },
                        { name: "SLA/Latency Guarantees", weight: 3, db: '', qlik: '', notes: "Service level commitments and performance SLAs" },
                        { name: "Run-time Limits & Thresholds", weight: 3, db: '', qlik: '', notes: "Query timeouts, resource limits" },
                        { name: "Maintenance/Version Management", weight: 3, db: '', qlik: '', notes: "Patching, upgrades, version control" }
                    ]
                },
                {
                    name: "Cost & Resources",
                    key: "cost",
                    items: [
                        { name: "Platform Skill Footprint", weight: 3, db: '', qlik: '', notes: "Team skills needed to build and maintain solution" },
                        { name: "Cost Predictability", weight: 3, db: '', qlik: '', notes: "Compute-based pricing vs seat-based" },
                        { name: "Raw Cost Savings", weight: 3, db: '', qlik: '', notes: "Potential for lower costs at scale" },
                        { name: "Custom UI Development/Maintenance", weight: 3, db: '', qlik: '', notes: "Cost of building and maintaining custom interfaces" },
                        { name: "License Model Fit & Simplicity", weight: 3, db: '', qlik: '', notes: "CFO-friendly licensing, ease of understanding costs" }
                    ]
                },
                {
                    name: "Product & Market",
                    key: "product",
                    items: [
                        { name: "Product Vision Alignment", weight: 3, db: '', qlik: '', notes: "Long-term product roadmap alignment with needs" },
                        { name: "Product Momentum", weight: 3, db: '', qlik: '', notes: "Market adoption, innovation velocity, ecosystem growth" },
                        { name: "Hireability", weight: 3, db: '', qlik: '', notes: "Ability to hire talent with platform expertise" }
                    ]
                }
            ]);

            const clamp = (v, lo, hi) => Math.min(hi, Math.max(lo, v));
            const clampInt = (v, lo, hi) => Math.round(clamp(v, lo, hi));

            const updateScore = (catIdx, itemIdx, field, raw) => {
                const newCategories = [...categories];
                const item = { ...newCategories[catIdx].items[itemIdx] };
                if (field === 'weight') {
                    const v = Number(raw);
                    item.weight = Number.isFinite(v) ? clampInt(v, 1, 5) : 1;
                } else if (field === 'db' || field === 'qlik') {
                    const v = Number(raw);
                    item[field] = Number.isFinite(v) ? clamp(v, 0, 10) : 0;
                } else {
                    item[field] = raw;
                }
                newCategories[catIdx].items[itemIdx] = item;
                setCategories(newCategories);
            };

            const updateMetaWeight = (key, value) => {
                const v = Number(value);
                setMetaWeights(prev => ({ ...prev, [key]: Number.isFinite(v) ? Math.max(0, v) : 0 }));
            };

            const results = useMemo(() => {
                let totalWeightedDB = 0, totalWeightedQlik = 0, totalEffectiveWeight = 0;
                const categoryResults = categories.map(category => {
                    const categoryMultiplier = Math.max(0, Number(metaWeights[category.key]) || 0);
                    const sumOfWeights = category.items.reduce((sum, item) => sum + (Number(item.weight) || 0), 0) || 1;
                    let categoryWeightedDB = 0, categoryWeightedQlik = 0;
                    category.items.forEach(item => {
                        const w = Number(item.weight) || 0;
                        const db = Number(item.db) || 0;
                        const ql = Number(item.qlik) || 0;
                        const normalizedWeight = (w / sumOfWeights) * categoryMultiplier;
                        categoryWeightedDB += db * normalizedWeight;
                        categoryWeightedQlik += ql * normalizedWeight;
                    });
                    totalWeightedDB += categoryWeightedDB;
                    totalWeightedQlik += categoryWeightedQlik;
                    totalEffectiveWeight += categoryMultiplier;
                    return { category: category.name, multiplier: categoryMultiplier, sumOfWeights, weightedDB: categoryWeightedDB, weightedQlik: categoryWeightedQlik, avgDB: categoryMultiplier ? categoryWeightedDB / categoryMultiplier : 0, avgQlik: categoryMultiplier ? categoryWeightedQlik / categoryMultiplier : 0 };
                });
                const safeDenom = totalEffectiveWeight || 1;
                return { categories: categoryResults, totalWeightedDB, totalWeightedQlik, totalEffectiveWeight, finalDB: totalWeightedDB / safeDenom, finalQlik: totalWeightedQlik / safeDenom };
            }, [categories, metaWeights]);

            return (
                <div className="w-full max-w-7xl mx-auto p-6">
                    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
                        <div className="flex items-center justify-between mb-2">
                            <h1 className="text-3xl font-bold text-gray-900">Databricks vs Qlik Evaluation</h1>
                        </div>
                        <p className="text-gray-600 mb-4">Quantitative assessment framework</p>

                        <div className="bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4">
                            <h3 className="font-semibold text-gray-700 mb-3">Category Multipliers</h3>
                            <div className="flex gap-16">
                                <div className="space-y-2">
                                    {[
                                        { key: 'coreBIAnalytics', label: 'Core BI: Analytics & Interactivity' },
                                        { key: 'coreBIViz', label: 'Core BI: Visualization & Design' },
                                        { key: 'dataPlatform', label: 'Data Platform & Architecture' },
                                        { key: 'governance', label: 'Governance & Security' },
                                        { key: 'aiml', label: 'AI/ML Capabilities & Future Readiness' },
                                    ].map(({ key, label }) => (
                                        <div key={key} className="flex items-center gap-2">
                                            <label className="text-sm text-gray-700 font-medium w-64">{label}</label>
                                            <input
                                                type="number"
                                                step="0.1"
                                                value={metaWeights[key]}
                                                onChange={(e) => updateMetaWeight(key, e.target.value)}
                                                className="w-16 px-2 py-1.5 border border-gray-300 rounded text-sm text-center"
                                            />
                                        </div>
                                    ))}
                                </div>
                                <div className="space-y-2">
                                    {[
                                        { key: 'devEx', label: 'Developer Experience & Velocity' },
                                        { key: 'operations', label: 'Operations & Scalability' },
                                        { key: 'cost', label: 'Cost & Resources' },
                                        { key: 'product', label: 'Product & Market' },
                                    ].map(({ key, label }) => (
                                        <div key={key} className="flex items-center gap-2">
                                            <label className="text-sm text-gray-700 font-medium w-64">{label}</label>
                                            <input
                                                type="number"
                                                step="0.1"
                                                value={metaWeights[key]}
                                                onChange={(e) => updateMetaWeight(key, e.target.value)}
                                                className="w-16 px-2 py-1.5 border border-gray-300 rounded text-sm text-center"
                                            />
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <!-- Tip block added here -->
                            <p className="text-sm text-gray-600 mt-4 border-t border-gray-200 pt-3">
                                <strong>Tip:</strong> Category multipliers express <em>relative importance</em> across domains. 
                                There are no predefined limits — set any value that reflects your judgment. 
                                For example: 1.0 = equal weight, 2.0 = twice as important, 10.0 = dominant priority. 
                                Use them to emphasize what matters most in your evaluation.
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<EvaluationFramework />);
    </script>
</body>
</html>
